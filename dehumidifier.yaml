esphome:
  name: midea-dehumidifier

# replace with your esp settings
esp32:
  board: esp32dev
  framework:
    type: esp-idf

# replace with your wifi settings
wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

ota:
  platform: esphome
  password: !secret ota_update # replace with your password

external_components:
  - source:
      type: git
      url: https://github.com/Chreece/ESPHome-Dehumidifier
      ref: main
    components: [midea_dehum]
    refresh: 0min

uart:
  id: uart_midea
  tx_pin: GPIO16 # replace with the TX pin used from esp
  rx_pin: GPIO17 # replace with the RX pin used from esp
  baud_rate: 9600

midea_dehum:
  id: midea_dehum_comp
  uart_id: uart_midea

  # üÜï Optional: Rename display modes to match your device‚Äôs front panel.
  # For example, your unit may label these as ‚ÄúCont‚Äù, ‚ÄúDry‚Äù, or ‚ÄúSmart‚Äù.
  # These names only affect how the presets appear in Home Assistant ‚Äî 
  # the internal logic and protocol remain the same.
  # üí° Tip:
  # If any of the modes below are set to "UNUSED" (case-insensitive),
  # that preset will NOT appear in the Home Assistant UI.
  # Use this if your device doesn‚Äôt support or respond to a specific mode.
  # For instance, if pressing ‚ÄúSMART‚Äù, your unit doesn't change any mode,
  # set display_mode_smart: "UNUSED" to hide it from the UI.
  display_mode_setpoint: 'UNUSED'
  display_mode_continuous: 'Cont'
  display_mode_smart: 'Smart'
  display_mode_clothes_drying: 'Dry'

climate:
  - platform: midea_dehum
    midea_dehum_id: midea_dehum_comp
    name: "Inventor Dehumidifier"

# Optional sensor to inform when the Bucket is full
binary_sensor:
  - platform: midea_dehum
    midea_dehum_id: midea_dehum_comp
    bucket_full:
      name: "Bucket Full"

# Optional error sensor remove this block if not needed
sensor:
  - platform: midea_dehum
    midea_dehum_id: midea_dehum_comp
    error:
      name: "Error Code"
      
# Optional switches remove the block if none is needed
switch:
  - platform: midea_dehum
    midea_dehum_id: midea_dehum_comp
# Optional ionizer control, add this block only if your device has Ionizer
    ionizer:
      name: "Ionizer"
# Optional swing control, add this only if your device has Swing function (e.g. Comfee (CDDF7-16DEN7-WFI))
    swing:
      name: "Swing"
# Optional Child Lock control, add this only if your device has Child lock function
    child_lock:
      name: "Lock"
# Optional UV control, add this only if your device has UV function
    uv:
      name: "UV"
      
